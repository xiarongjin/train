<div align="center"><h1>函数（下）</div>

### 主要内容：

![image-20200808160207538](020302JS函数下.assets/image-20200808160207538.png)

### 学习目标：

| 节数                   | 知识点       | 要求 |
| ---------------------- | ------------ | ---- |
| 第一节（函数总结说明） | 函数总结说明 | 掌握 |
| 第二节（闭包）         | 闭包         | 掌握 |

 

## 函数总结说明

### 不能在非函数的代码块中声明函数

不要在代码块中定义一个函数，这样造成假的情况下不执行

![image-20200808160238311](020302JS函数下.assets/image-20200808160238311.png)

![image-20200808160244542](020302JS函数下.assets/image-20200808160244542.png)

### name属性和length属性

![image-20200808160253142](020302JS函数下.assets/image-20200808160253142.png)

### 变量和函数的提升

函数的提升

![image-20200808160257471](020302JS函数下.assets/image-20200808160257471.png)

### 超一等公民

在很多传统语言（C/C++/Java/C#等）中，**函数都是作为一个二等公民**存在，你只能用语言的关键字声明一个函数然后调用它，如果需要把函数作为参数传给另一个函数，或是赋值给一个本地变量，又或是作为返回值，就需要通过函数指针(function pointer)、代理(delegate)等特殊的方式周折一番。
    **但是在JavaScript世界中函数却是超一等公民**，它不仅拥有一切传统函数的使用方式（声明和调用），而且可以做到像简单值一样赋值、传参、返回，这样的函数也称之为第一级函数（First-class Function）或一等公民。不仅如此，**JavaScript中的函数还充当了类的构造函数的作用**，同时又是一个Function类的实例(instance)。这样的多重身份让JavaScript的函数变得非常重要。 

### 函数自定义声明

### 将函数赋值给变量

### 将函数作为参数

### 将函数自调用

### 将函数作为对象的方法

### arguments对象

**Arguments对象是js给我们提供的一个形式参数，它是一个数组。**

![image-20200808160326270](020302JS函数下.assets/image-20200808160326270.png)

![image-20200808160330770](020302JS函数下.assets/image-20200808160330770.png)

### 值传递和地址传递

值传递：

![image-20200808160339570](020302JS函数下.assets/image-20200808160339570.png)

地址传递：

![image-20200808160344649](020302JS函数下.assets/image-20200808160344649.png)

![image-20200808160351660](020302JS函数下.assets/image-20200808160351660.png)

![image-20200808160356464](020302JS函数下.assets/image-20200808160356464.png)

### 函数的同名参数

![image-20200808160404278](020302JS函数下.assets/image-20200808160404278.png)

### eval函数

eval(“字符串”):可以计算字符串的值

![image-20200808160410891](020302JS函数下.assets/image-20200808160410891.png)

### instanceof类型检测

instanceof 用于判断一个变量是否是某个对象的实例

![image-20200808160416353](020302JS函数下.assets/image-20200808160416353.png)

![image-20200808160422156](020302JS函数下.assets/image-20200808160422156.png)

### javascript垃圾回收机制

对于其他语言来说，如C,C++,需要开发者手动的来跟踪并管理内存。

Javascript 具有自动垃圾回收机制，会定期对那些我们**不再使用的变量、对象所占用的内存进行释放**

其原理就是找出那些不在被使用的变量，然后释放其所占有的内存。**回收器一般是按照固定的时间间隔或者预设的时间进行处理的。** 

### 作业：统计字符串中字母出现最多的字符（不区分大小写）

## 闭包（重点难点）

### 为什么要使用闭包

闭包是解决什么问题的？

**如何在函数外部访问函数内部局部变量的问题。**

![image-20200808160435203](020302JS函数下.assets/image-20200808160435203.png)

怎样解决这个问题？

**可以使用return语句返回一个值，但这个不是闭包。**

![image-20200808160440442](020302JS函数下.assets/image-20200808160440442.png)

### 什么是闭包

闭包：能够读取其他函数（外部函数）变量的函数（内部函数）就是闭包。

![image-20200808160445611](020302JS函数下.assets/image-20200808160445611.png)

### 闭包的分类

1、函数闭包

![image-20200808160452443](020302JS函数下.assets/image-20200808160452443.png)

![image-20200808160504183](020302JS函数下.assets/image-20200808160504183.png)

![image-20200808160511837](020302JS函数下.assets/image-20200808160511837.png)

![image-20200808160519417](020302JS函数下.assets/image-20200808160519417.png)

2、对象闭包

![image-20200808160526117](020302JS函数下.assets/image-20200808160526117.png)

### 闭包的特点和作用

闭包的特点：

**特点1：函数内部包含一个函数**

**特点2：内部函数可以使用外部函数的变量**

闭包的作用：

1.一个就是可以读取函数内部的变量。

2.另一个就是让这些变量的值始终保持在内存中。

### 计数器的累加

![image-20200808160537743](020302JS函数下.assets/image-20200808160537743.png)

![image-20200808160544120](020302JS函数下.assets/image-20200808160544120.png)

### 闭包的问题

内存泄漏

内存泄漏（Memory Leak）是指程序中己动态分配的堆内存由于某种原因程序未释放或无法释放，造成系统内存的浪费，导致程序运行速度减慢甚至系统崩溃等严重后果。

多次调用

### 闭包的实际应用

没有使用闭包

![image-20200808160552038](020302JS函数下.assets/image-20200808160552038.png)

使用了闭包

![image-20200808160556891](020302JS函数下.assets/image-20200808160556891.png)

![image-20200808160603340](020302JS函数下.assets/image-20200808160603340.png)

 

 

 